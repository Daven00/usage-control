import json
import websocket
import uuid
import datetime

session_id = "None"
turn_on = "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnNldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+dG9nZ2xlPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjp2YWx1ZSIgSW5jbHVkZUluUmVzdWx0PSJmYWxzZSI+CiAgICAgICAgICAgIDxBdHRyaWJ1dGVWYWx1ZSBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciI+MTwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICA8L0F0dHJpYnV0ZXM+CjwvUmVxdWVzdD4="
turn_off="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnNldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+dG9nZ2xlPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjp2YWx1ZSIgSW5jbHVkZUluUmVzdWx0PSJmYWxzZSI+CiAgICAgICAgICAgIDxBdHRyaWJ1dGVWYWx1ZSBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciI+MDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICA8L0F0dHJpYnV0ZXM+CjwvUmVxdWVzdD4="
get_on_off="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmdldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+dG9nZ2xlPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgIDwvQXR0cmlidXRlcz4KPC9SZXF1ZXN0Pg=="
set_brightness_95="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnNldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YnJpZ2h0bmVzczwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246dmFsdWUiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI2ludGVnZXIiPjk1PC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgIDwvQXR0cmlidXRlcz4KPC9SZXF1ZXN0Pg=="
set_brightness_50="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnNldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YnJpZ2h0bmVzczwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246dmFsdWUiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI2ludGVnZXIiPjUwPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgIDwvQXR0cmlidXRlcz4KPC9SZXF1ZXN0Pg=="
get_brightness="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YXBwX25hbWU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIj4KICAgICAgICA8QXR0cmlidXRlIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmxhbXBfaWQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgIDwvQXR0cmlidXRlPgogICAgPC9BdHRyaWJ1dGVzPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIiBJbmNsdWRlSW5SZXN1bHQ9ImZhbHNlIj4KICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmdldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+YnJpZ2h0bmVzczwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICA8L0F0dHJpYnV0ZXM+CjwvUmVxdWVzdD4="
policy="PFBvbGljeQogICAgICAgIHhtbG5zPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmNvcmU6c2NoZW1hOndkLTE3IgogICAgICAgIFBvbGljeUlkPSJwb2xpY3ktYXBwX25hbWUtbGFtcCIKICAgICAgICBSdWxlQ29tYmluaW5nQWxnSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6cnVsZS1jb21iaW5pbmctYWxnb3JpdGhtOmRlbnktdW5sZXNzLXBlcm1pdCIKICAgICAgICBWZXJzaW9uPSIzLjAiPgogICAgPERlc2NyaXB0aW9uPlBvbGljeSBmb3IgdGhlIGxhbXAgbGFtcF9pZCBhbmQgYXBwIGFwcF9uYW1lPC9EZXNjcmlwdGlvbj4KICAgIDxUYXJnZXQ+CiAgICAgICAgPEFueU9mPgogICAgICAgICAgICA8QWxsT2Y+CiAgICAgICAgICAgICAgICA8TWF0Y2ggTWF0Y2hJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0LWNhdGVnb3J5OmFjY2Vzcy1zdWJqZWN0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgIDwvQXR0cmlidXRlRGVzaWduYXRvcj4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmFwcF9uYW1lPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvTWF0Y2g+CiAgICAgICAgICAgICAgICA8TWF0Y2ggTWF0Y2hJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpyZXNvdXJjZTpyZXNvdXJjZS1pZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTpyZXNvdXJjZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5sYW1wX2lkPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvTWF0Y2g+CiAgICAgICAgICAgIDwvQWxsT2Y+CiAgICAgICAgPC9BbnlPZj4KICAgIDwvVGFyZ2V0PgogICAgPFJ1bGUgRWZmZWN0PSJQZXJtaXQiIFJ1bGVJZD0icnVsZS1zZXQtdG9nZ2xlLW9uIj4KICAgICAgICA8RGVzY3JpcHRpb24+UnVsZSB0aGF0IHBlcm1pdHMgdG8gdHVybiBvbiB0aGUgbGFtcDwvRGVzY3JpcHRpb24+CiAgICAgICAgPFRhcmdldD48L1RhcmdldD4KICAgICAgICA8IS0tIFByZSBjb25kaXRpb24gLS0+CiAgICAgICAgPENvbmRpdGlvbiBEZWNpc2lvblRpbWU9InByZSI+CiAgICAgICAgICAgIDxBcHBseSBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmFuZCI+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246YWN0aW9uLWlkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTphY3Rpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5zZXQ8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1vbmUtYW5kLW9ubHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlRGVzaWduYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjpwcm9wZXJ0eSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6YWN0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXVzdEJlUHJlc2VudD0idHJ1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvQXR0cmlidXRlRGVzaWduYXRvcj4KICAgICAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+dG9nZ2xlPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjppbnRlZ2VyLWVxdWFsIj4KICAgICAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246aW50ZWdlci1vbmUtYW5kLW9ubHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlRGVzaWduYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjp2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6YWN0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNpbnRlZ2VyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNpbnRlZ2VyIj4xPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgPC9Db25kaXRpb24+CiAgICA8L1J1bGU+CiAgICA8UnVsZSBFZmZlY3Q9IlBlcm1pdCIgUnVsZUlkPSJydWxlLXNldC10b2dnbGUtb2ZmIj4KICAgICAgICA8RGVzY3JpcHRpb24+UnVsZSB0aGF0IHBlcm1pdHMgdG8gdHVybiBvZmYgdGhlIGxhbXA8L0Rlc2NyaXB0aW9uPgogICAgICAgIDxUYXJnZXQ+PC9UYXJnZXQ+CiAgICAgICAgPCEtLSBQcmUgY29uZGl0aW9uIC0tPgogICAgICAgIDxDb25kaXRpb24gRGVjaXNpb25UaW1lPSJwcmUiPgogICAgICAgICAgICA8QXBwbHkgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjphbmQiPgogICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KICAgICAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOmFjdGlvbi1pZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6YWN0aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTXVzdEJlUHJlc2VudD0idHJ1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvQXR0cmlidXRlRGVzaWduYXRvcj4KICAgICAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+c2V0PC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246cHJvcGVydHkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnRvZ2dsZTwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246aW50ZWdlci1lcXVhbCI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmludGVnZXItb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246dmFsdWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciI+MDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICA8L0FwcGx5PgogICAgICAgIDwvQ29uZGl0aW9uPgogICAgPC9SdWxlPgogICAgPFJ1bGUgRWZmZWN0PSJEZW55IiBSdWxlSWQ9InJ1bGUtZ2V0LXRvZ2dsZS1vZmYiPgogICAgICAgIDxEZXNjcmlwdGlvbj5SdWxlIHRoYXQgZGVuaWVzIHRvIGdldCB0aGUgb24vb2ZmIHN0YXRlIG9mIHRoZSBsYW1wPC9EZXNjcmlwdGlvbj4KICAgICAgICA8VGFyZ2V0PjwvVGFyZ2V0PgogICAgICAgIDwhLS0gUHJlIGNvbmRpdGlvbiAtLT4KICAgICAgICA8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0icHJlIj4KICAgICAgICAgICAgPEFwcGx5IEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246YW5kIj4KICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1vbmUtYW5kLW9ubHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlRGVzaWduYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjphY3Rpb24taWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmdldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KICAgICAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOnByb3BlcnR5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTphY3Rpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj50b2dnbGU8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICA8L0NvbmRpdGlvbj4KICAgIDwvUnVsZT4KICAgIDxSdWxlIEVmZmVjdD0iUGVybWl0IiBSdWxlSWQ9InJ1bGUtYnJpZ2h0bmVzcy1sb3dlci10aGFuLTgwIj4KICAgICAgICA8RGVzY3JpcHRpb24+UnVsZSB0aGF0IHBlcm1pdHMgdG8gc2V0IHRoZSBicmlnaHRuZXNzIG9ubHkgdG8gYSB2YWx1ZSBsb3dlciB0aGFuIDgwPC9EZXNjcmlwdGlvbj4KICAgICAgICA8VGFyZ2V0PjwvVGFyZ2V0PgogICAgICAgIDwhLS0gUHJlIGNvbmRpdGlvbiAtLT4KICAgICAgICA8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0icHJlIj4KICAgICAgICAgICAgPEFwcGx5IEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246YW5kIj4KICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1vbmUtYW5kLW9ubHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlRGVzaWduYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjphY3Rpb24taWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPnNldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KICAgICAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOnByb3BlcnR5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTphY3Rpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5icmlnaHRuZXNzPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjppbnRlZ2VyLWxlc3MtdGhhbiI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmludGVnZXItb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDphY3Rpb246dmFsdWUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjaW50ZWdlciI+ODA8L0F0dHJpYnV0ZVZhbHVlPgogICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICA8L0NvbmRpdGlvbj4KICAgIDwvUnVsZT4KICAgIDxSdWxlIEVmZmVjdD0iUGVybWl0IiBSdWxlSWQ9InJ1bGUtYnJpZ2h0bmVzcy1sb3dlci10aGFuLTgwIj4KICAgICAgICA8RGVzY3JpcHRpb24+UnVsZSB0aGF0IHBlcm1pdHMgdG8gZ2V0IHRoZSBicmlnaHRuZXNzIHZhbHVlPC9EZXNjcmlwdGlvbj4KICAgICAgICA8VGFyZ2V0PjwvVGFyZ2V0PgogICAgICAgIDwhLS0gUHJlIGNvbmRpdGlvbiAtLT4KICAgICAgICA8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0icHJlIj4KICAgICAgICAgICAgPEFwcGx5IEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246YW5kIj4KICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCI+CiAgICAgICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1vbmUtYW5kLW9ubHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlRGVzaWduYXRvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmFjdGlvbjphY3Rpb24taWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmFjdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE11c3RCZVByZXNlbnQ9InRydWUiPgogICAgICAgICAgICAgICAgICAgICAgICA8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CiAgICAgICAgICAgICAgICAgICAgPC9BcHBseT4KICAgICAgICAgICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPmdldDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgICAgICAgICA8L0FwcGx5PgogICAgICAgICAgICAgICAgPEFwcGx5CiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KICAgICAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxBdHRyaWJ1dGVEZXNpZ25hdG9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOnByb3BlcnR5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTphY3Rpb24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5icmlnaHRuZXNzPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgPC9Db25kaXRpb24+CiAgICA8L1J1bGU+CiAgICA8UnVsZSBFZmZlY3Q9IlBlcm1pdCIgUnVsZUlkPSJvbmdvaW5nLWFuZC1wb3N0LWFsd2F5cy10cnVlIj4KICAgICAgICA8IS0tIE9uIGdvaW5nIGNvbmRpdGlvbiAtLT4KICAgICAgICA8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0ib25nb2luZyI+CiAgICAgICAgICAgIDxBcHBseSBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmFuZCI+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpyZXNvdXJjZTpyZXNvdXJjZS1pZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6cmVzb3VyY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5sYW1wX2lkPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgPC9Db25kaXRpb24+CiAgICAgICAgPCEtLSBQb3N0IGNvbmRpdGlvbiAtLT4KICAgICAgICA8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0icG9zdCI+CiAgICAgICAgICAgIDxBcHBseSBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmFuZCI+CiAgICAgICAgICAgICAgICA8QXBwbHkKICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgogICAgICAgICAgICAgICAgICAgIDxBcHBseQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZURlc2lnbmF0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpyZXNvdXJjZTpyZXNvdXJjZS1pZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6cmVzb3VyY2UiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNdXN0QmVQcmVzZW50PSJ0cnVlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgogICAgICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgICAgICAgICAgPEF0dHJpYnV0ZVZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5sYW1wX2lkPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgICAgIDwvQXBwbHk+CiAgICAgICAgPC9Db25kaXRpb24+CiAgICA8L1J1bGU+CiAgICA8UnVsZSBFZmZlY3Q9IkRlbnkiIFJ1bGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDpkZWZkZW55Ij4KICAgICAgICA8RGVzY3JpcHRpb24+RGVmYXVsdERlbnk8L0Rlc2NyaXB0aW9uPgogICAgICAgIDxUYXJnZXQ+PC9UYXJnZXQ+CiAgICA8L1J1bGU+CjwvUG9saWN5Pg=="

def on_message(ws, message):
    if "ucs-command" in message:
        print("\nReceived message from the ucs:")
        parsed = json.loads(message)
        print(json.dumps(parsed, indent=2))
        print("\n--------------------------------\n")

        if parsed["Volatile"]["value"]["command"]["value"]["message"]["purpose"] == "TRY_RESPONSE":
            global session_id
            session_id = parsed["Volatile"]["value"]["command"]["value"]["message"]["session_id"]

        enter_command()

def on_error(ws, error):
    print(error)


def on_close(ws, close_status_code, close_msg):
    print("### Connection closed ###")


def on_open(ws):
    print("### Connection established ###")
    enter_command()

def enter_command():
    print("")
    print("LIST OF COMMANDS:")
    print("")
    print("  PEP commands:              PAP commands:")
    print("    1 : register               5 : add policy")
    print("    2 : try access             6 : list policies")
    print("    3 : start access           7 : get policy")
    print("    4 : end access             8 : delete policy")
    print("")
    print("  LAMP EXAMPLE:")
    print("   -h : print a description about these new commands")
    print("   10 : add policy for the lamp")
    print("   11 : request permission to turn the lamp on")
    print("   12 : request permission to turn the lamp off")
    print("   13 : request permission to get the on/off state of the lamp")
    print("   14 : request permission to set the brightness to 95")
    print("   15 : request permission to set the brightness to 50")
    print("   16 : request permission to get the brightness value")
    print("")
    command = input("Enter command number> ")
    print("")
    send_command(command)

def send_command(command):
    if command == "1":
        register()
    elif command == "2":
        try_access()
    elif command == "3":
        start_access()
    elif command == "4":
        end_access()
    elif command == "5":
        add_policy()
    elif command == "6":
        list_policies()
    elif command == "7":
        get_policy()
    elif command == "8":
        delete_policy()
    elif command == "9":
        unrecognized_command()
    elif command == "q":
        exit("")
    elif command == "-h":
        print_description()
    elif command == "10":
        add_policy_lamp()
    elif command == "11":
        try_access_lamp(turn_on)
    elif command == "12":
        try_access_lamp(turn_off)
    elif command == "13":
        try_access_lamp(get_on_off)
    elif command == "14":
        try_access_lamp(set_brightness_95)
    elif command == "15":
        try_access_lamp(set_brightness_50)
    elif command == "16":
        try_access_lamp(get_brightness)
    else:
        print("command not found")
        enter_command()


def print_and_send(json_out):
    print("Message sent:")
    print(json.dumps(json_out, indent=2))
    ws.send(json.dumps(json_out))

## REGISTER
def register():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pep-command",
                    "value": {
                        "message": {
                            "purpose": "REGISTER",
                            "message_id": str(uuid.uuid1()),
                            "sub_topic_name": "topic-name-the-pep-is-subscribed-to",
                            "sub_topic_uuid": "topic-uuid-the-pep-is-subscribed-to"
                        },
                        "id": "pep-websocket_client",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n---------- REGISTER ------------\n")
    print_and_send(ws_req)

## TRY ACCESS
def try_access():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pep-command",
                    "value": {
                        "message": {
                            "purpose": "TRY",
                            "message_id": str(uuid.uuid1()),
                            "request": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pgo8UmVxdWVzdCBSZXR1cm5Qb2xpY3lJZExpc3Q9ImZhbHNlIiBDb21iaW5lZERlY2lzaW9uPSJmYWxzZSIKICAgICAgICAgeG1sbnM9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6Y29yZTpzY2hlbWE6d2QtMTciPgogICAgPEF0dHJpYnV0ZXMgQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCI+CiAgICAgICAgPEF0dHJpYnV0ZSBBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpzdWJqZWN0OnN1YmplY3QtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+QzwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICA8L0F0dHJpYnV0ZXM+CiAgICA8QXR0cmlidXRlcyBDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6cmVzb3VyY2UiPgogICAgICAgIDxBdHRyaWJ1dGUgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6cmVzb3VyY2U6cmVzb3VyY2UtaWQiIEluY2x1ZGVJblJlc3VsdD0iZmFsc2UiPgogICAgICAgICAgICA8QXR0cmlidXRlVmFsdWUgRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+UkVTPC9BdHRyaWJ1dGVWYWx1ZT4KICAgICAgICA8L0F0dHJpYnV0ZT4KICAgIDwvQXR0cmlidXRlcz4KICAgIDxBdHRyaWJ1dGVzIENhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTphY3Rpb24iPgogICAgICAgIDxBdHRyaWJ1dGUgQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOmFjdGlvbi1pZCIgSW5jbHVkZUluUmVzdWx0PSJmYWxzZSI+CiAgICAgICAgICAgIDxBdHRyaWJ1dGVWYWx1ZSBEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5PUDwvQXR0cmlidXRlVmFsdWU+CiAgICAgICAgPC9BdHRyaWJ1dGU+CiAgICA8L0F0dHJpYnV0ZXM+CjwvUmVxdWVzdD4=",
                            "policy": None
                        },
                        "id": "pep-websocket_client",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- TRY ACCESS -----------\n")
    print_and_send(ws_req)

## START ACCESS
def start_access():
    global session_id
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pep-command",
                    "value": {
                        "message": {
                            "purpose": "START",
                            "message_id": str(uuid.uuid1()),
                            "session_id": session_id
                        },
                        "id": "pep-websocket_client",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n-------- START ACCESS ----------\n")
    check_session_before_sending(ws_req)

## END ACCESS
def end_access():
    global session_id
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pep-command",
                    "value": {
                        "message": {
                            "purpose": "END",
                            "message_id": str(uuid.uuid1()),
                            "session_id": session_id
                        },
                        "id": "pep-websocket_client",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- END ACCESS -----------\n")
    check_session_before_sending(ws_req)
    session_id = "None"

def check_session_before_sending(ws_req):
    global session_id

    if session_id == "None":
        print("WARNING: No active session yet")
        answer = "?"
        while answer != "y" and answer != "n":
            answer = input("Do you want to proceed anyway? (y/n)> ")
            if answer == "y":
                print_and_send(ws_req)
            elif answer == "n":
                print("\n--------------------------------\n")
                enter_command()
    else:
        print_and_send(ws_req)

## ADD POLICY
def add_policy():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pap-command",
                    "value": {
                        "message": {
                            "purpose": "ADD_POLICY",
                            "message_id": str(uuid.uuid1()),
                            "policy": "PFBvbGljeQoJCXhtbG5zPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmNvcmU6c2NoZW1hOndkLTE3IgoJCVBvbGljeUlkPSJwb2xpY3lfdGVtcGxhdGUyIgoJCVJ1bGVDb21iaW5pbmdBbGdJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDpydWxlLWNvbWJpbmluZy1hbGdvcml0aG06ZGVueS11bmxlc3MtcGVybWl0IgoJCVZlcnNpb249IjMuMCI+Cgk8RGVzY3JpcHRpb24+UG9saWN5PC9EZXNjcmlwdGlvbj4KCTxUYXJnZXQgPgoJCTxBbnlPZiA+CgkJCTxBbGxPZiA+CgkJCQk8TWF0Y2ggTWF0Y2hJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiID4KCQkJCQk8QXR0cmlidXRlRGVzaWduYXRvcgoJCQkJCQkJQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdDpzdWJqZWN0LWlkIgoJCQkJCQkJQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6c3ViamVjdC1jYXRlZ29yeTphY2Nlc3Mtc3ViamVjdCIKCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCgkJCQkJCQlNdXN0QmVQcmVzZW50PSJ0cnVlIj4KCQkJCQk8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CgkJCQkJPEF0dHJpYnV0ZVZhbHVlCgkJCQkJCQlEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5DPC9BdHRyaWJ1dGVWYWx1ZT4KCQkJCTwvTWF0Y2g+CgkJCQk8TWF0Y2ggTWF0Y2hJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiID4KCQkJCQk8QXR0cmlidXRlRGVzaWduYXRvcgoJCQkJCQkJQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6cmVzb3VyY2U6cmVzb3VyY2Utc2VydmVyIgoJCQkJCQkJQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OnJlc291cmNlIgoJCQkJCQkJRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKCQkJCQkJCU11c3RCZVByZXNlbnQ9InRydWUiPgoJCQkJCTwvQXR0cmlidXRlRGVzaWduYXRvcj4KCQkJCTxBdHRyaWJ1dGVWYWx1ZQoJCQkJCQlEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5BVUQ8L0F0dHJpYnV0ZVZhbHVlPgoJCQkJPC9NYXRjaD4KCQkJCTxNYXRjaCBNYXRjaElkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCIgPgoJCQkJCTxBdHRyaWJ1dGVEZXNpZ25hdG9yCgkJCQkJCQlBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpyZXNvdXJjZTpyZXNvdXJjZS1pZCIKCQkJCQkJCUNhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTpyZXNvdXJjZSIKCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCgkJCQkJCQlNdXN0QmVQcmVzZW50PSJ0cnVlIj4KCQkJCQk8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CgkJCQk8QXR0cmlidXRlVmFsdWUKCQkJCQkJRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+UkVTPC9BdHRyaWJ1dGVWYWx1ZT4KCQkJCTwvTWF0Y2g+CgkJCTwvQWxsT2Y+CgkJPC9BbnlPZj4KCTwvVGFyZ2V0PgoJPFJ1bGUgRWZmZWN0PSJQZXJtaXQiIFJ1bGVJZD0icnVsZS1wZXJtaXQiPgoJCTxUYXJnZXQ+PC9UYXJnZXQ+CgkJPCEtLSBQcmUgY29uZGl0aW9uIC0tPgoJCTxDb25kaXRpb24gRGVjaXNpb25UaW1lPSJwcmUiPgoJCQk8QXBwbHkgRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjphbmQiPgoJCQkJPEFwcGx5CgkJCQkJCUZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KCQkJCQk8QXBwbHkKCQkJCQkJCUZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CgkJCQkJCTxBdHRyaWJ1dGVEZXNpZ25hdG9yCgkJCQkJCQkJQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6cmVzb3VyY2U6cmVzb3VyY2Utc2VydmVyIgoJCQkJCQkJCUNhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTpyZXNvdXJjZSIKCQkJCQkJCQlEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgoJCQkJCQkJCU11c3RCZVByZXNlbnQ9InRydWUiPgoJCQkJCQk8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CgkJCQkJPC9BcHBseT4KCQkJCQk8QXR0cmlidXRlVmFsdWUKCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPkFVRDwvQXR0cmlidXRlVmFsdWU+CgkJCQk8L0FwcGx5PgoJCQkJPEFwcGx5CgkJCQkJCUZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLWVxdWFsIj4KCQkJCQk8QXBwbHkKCQkJCQkJCUZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246c3RyaW5nLW9uZS1hbmQtb25seSI+CgkJCQkJCTxBdHRyaWJ1dGVEZXNpZ25hdG9yCgkJCQkJCQkJQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6YWN0aW9uOmFjdGlvbi1pZCIKCQkJCQkJCQlDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6YWN0aW9uIgoJCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCgkJCQkJCQkJTXVzdEJlUHJlc2VudD0idHJ1ZSI+CgkJCQkJCTwvQXR0cmlidXRlRGVzaWduYXRvcj4KCQkJCQk8L0FwcGx5PgoJCQkJCTxBdHRyaWJ1dGVWYWx1ZQoJCQkJCQkJRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyI+T1A8L0F0dHJpYnV0ZVZhbHVlPgoJCQkJPC9BcHBseT4KCQkJCTxBcHBseQoJCQkJCQlGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCI+CgkJCQkJPEFwcGx5CgkJCQkJCQlGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1vbmUtYW5kLW9ubHkiPgoJCQkJCQk8QXR0cmlidXRlRGVzaWduYXRvcgoJCQkJCQkJCUF0dHJpYnV0ZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOnJlc291cmNlOnJlc291cmNlLWlkIgoJCQkJCQkJCUNhdGVnb3J5PSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmF0dHJpYnV0ZS1jYXRlZ29yeTpyZXNvdXJjZSIKCQkJCQkJCQlEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIgoJCQkJCQkJCU11c3RCZVByZXNlbnQ9InRydWUiPgoJCQkJCQk8L0F0dHJpYnV0ZURlc2lnbmF0b3I+CgkJCQkJPC9BcHBseT4KCQkJCQk8QXR0cmlidXRlVmFsdWUKCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciPlJFUzwvQXR0cmlidXRlVmFsdWU+CgkJCQk8L0FwcGx5PgoJCQk8L0FwcGx5PgoJCTwvQ29uZGl0aW9uPgoJCTwhLS0gT24gZ29pbmcgY29uZGl0aW9uIC0tPgoJCTxDb25kaXRpb24gRGVjaXNpb25UaW1lPSJvbmdvaW5nIj4KCQkJPEFwcGx5IEZ1bmN0aW9uSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDoxLjA6ZnVuY3Rpb246YW5kIj4KCQkJCTxBcHBseQoJCQkJCQlGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOnN0cmluZy1lcXVhbCIgPgoJCQkJCTxBcHBseQoJCQkJCQkJRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5IiA+CgkJCQkJCTxBdHRyaWJ1dGVEZXNpZ25hdG9yCgkJCQkJCQkJQXR0cmlidXRlSWQ9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6ZW52aXJvbm1lbnQ6YXR0cmlidXRlLTEiCgkJCQkJCQkJQ2F0ZWdvcnk9InVybjpvYXNpczpuYW1lczp0Yzp4YWNtbDozLjA6YXR0cmlidXRlLWNhdGVnb3J5OmVudmlyb25tZW50IgoJCQkJCQkJCURhdGFUeXBlPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNzdHJpbmciCgkJCQkJCQkJTXVzdEJlUHJlc2VudD0idHJ1ZSI+CgkJCQkJCTwvQXR0cmlidXRlRGVzaWduYXRvcj4KCQkJCQk8L0FwcGx5PgoJCQkJCTxBdHRyaWJ1dGVWYWx1ZQoJCQkJCQkJRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIgPmF0dHJpYnV0ZS0xLXZhbHVlPC9BdHRyaWJ1dGVWYWx1ZT4KCQkJCTwvQXBwbHk+CgkJCTwvQXBwbHk+CgkJPC9Db25kaXRpb24+CgkJPCEtLSBQb3N0IGNvbmRpdGlvbiAtLT4KCQk8Q29uZGl0aW9uIERlY2lzaW9uVGltZT0icG9zdCI+CgkJCTxBcHBseSBGdW5jdGlvbklkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6MS4wOmZ1bmN0aW9uOmFuZCI+CgkJCQk8QXBwbHkKCQkJCQkJRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctZXF1YWwiPgoJCQkJCTxBcHBseQoJCQkJCQkJRnVuY3Rpb25JZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpmdW5jdGlvbjpzdHJpbmctb25lLWFuZC1vbmx5Ij4KCQkJCQkJPEF0dHJpYnV0ZURlc2lnbmF0b3IKCQkJCQkJCQlBdHRyaWJ1dGVJZD0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjEuMDpyZXNvdXJjZTpyZXNvdXJjZS1pZCIKCQkJCQkJCQlDYXRlZ29yeT0idXJuOm9hc2lzOm5hbWVzOnRjOnhhY21sOjMuMDphdHRyaWJ1dGUtY2F0ZWdvcnk6cmVzb3VyY2UiCgkJCQkJCQkJRGF0YVR5cGU9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI3N0cmluZyIKCQkJCQkJCQlNdXN0QmVQcmVzZW50PSJ0cnVlIj4KCQkJCQkJPC9BdHRyaWJ1dGVEZXNpZ25hdG9yPgoJCQkJCTwvQXBwbHk+CgkJCQkJPEF0dHJpYnV0ZVZhbHVlCgkJCQkJCQlEYXRhVHlwZT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjc3RyaW5nIj5SRVM8L0F0dHJpYnV0ZVZhbHVlPgoJCQkJPC9BcHBseT4KCQkJPC9BcHBseT4KCQk8L0NvbmRpdGlvbj4KCTwvUnVsZT4KCTxSdWxlIEVmZmVjdD0iRGVueSIgUnVsZUlkPSJ1cm46b2FzaXM6bmFtZXM6dGM6eGFjbWw6My4wOmRlZmRlbnkiPgoJCTxEZXNjcmlwdGlvbj5EZWZhdWx0RGVueTwvRGVzY3JpcHRpb24+CgkJPFRhcmdldD48L1RhcmdldD4KCTwvUnVsZT4KPC9Qb2xpY3k+",
                            "policy_id": "policy_template2"
                        },
                        "id": "pap-web_socket",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- ADD POLICY -----------\n")
    print_and_send(ws_req)

## LIST POLICIES
def list_policies():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pap-command",
                    "value": {
                        "message": {
                            "purpose": "LIST_POLICIES",
                            "message_id": str(uuid.uuid1())
                        },
                        "id": "pap-web_socket",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n-------- LIST POLICIES ---------\n")
    print_and_send(ws_req)

## GET POLICY
def get_policy():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pap-command",
                    "value": {
                        "message": {
                            "purpose": "GET_POLICY",
                            "message_id": str(uuid.uuid1()),
                            "policy_id": "policy_template2"
                        },
                        "id": "pap-web_socket",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- GET POLICY -----------\n")
    print_and_send(ws_req)

## DELETE POLICY
def delete_policy():
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pap-command",
                    "value": {
                        "message": {
                            "purpose": "DELETE_POLICY",
                            "message_id": str(uuid.uuid1()),
                            "policy": None,
                            "policy_id": "policy_template2"
                        },
                        "id": "pap-web_socket",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n-------- DELETE POLICY ---------\n")
    print_and_send(ws_req)

## UNRECOGNIZED COMMAND
def unrecognized_command():
    ws_req = {
        "RequestPostTopicUUID":{
            "value":{
                "log":{
                    "type":"info",
                    "priority":"low",
                    "category":"status",
                    "message":"ACE Group Manager"
                }
            },
            "topic_name":"SIFIS:Log",
            "topic_uuid":"Log",
            "deleted":"false"
        }
    }
    print("\n----- UNRECOGNIZED COMMAND -----\n")
    print_and_send(ws_req)

    print("\nMessage was sent. However, if the UCS does not recognize the command, "
          "discards it without responding.")
    print("\n--------------------------------\n")
    enter_command()


def print_description():
    print("In this example, we have a policy stating that:\n"
          "- the app can turn the lamp on and off \n"
          "- the app cannot get the on/off state of the lamp\n"
          "- the app cannot set a brightness value greater than or equal to 80\n"
          "- the app can get the brightness value\n"
          "\n"
          "To examine the requests and the policy used, inspect this python\n"
          "script and you will find them as comments\n"
          "\n"
          "Run the flow smoothly:\n"
          "1) start the UCS\n"
          "2) add the policy (command 10)\n"
          "3) register the PEP (command 1)\n"
          "4) make any request (commands 11..16)\n"
          "     the requests are try_access requests. The 'evaluation' field\n"
          "     in the response indicates if the permission is granted (and\n"
          "     therefore the dev-API should go on) or not (the dev-API \n"
          "     execution should be stopped.\n"
          "     For each try_access that evaluates to Permit, a session is \n"
          "     created at the UCS; so, a back-to-back start_access, and an\n"
          "     end_access (when the usage is terminated) should follow.\n")

    input("Press any key to continue...")
    enter_command()


def add_policy_lamp():
    global policy
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pap-command",
                    "value": {
                        "message": {
                            "purpose": "ADD_POLICY",
                            "message_id": str(uuid.uuid1()),
                            "policy": policy,
                            "policy_id": "policy-app_name-lamp"
                        },
                        "id": "pap-web_socket",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- ADD POLICY -----------\n")
    print_and_send(ws_req)


def try_access_lamp(request):
    ws_req = {
        "RequestPubMessage": {
            "value": {
                "timestamp": int(datetime.datetime.now().timestamp()*1000),
                "command": {
                    "command_type": "pep-command",
                    "value": {
                        "message": {
                            "purpose": "TRY",
                            "message_id": str(uuid.uuid1()),
                            "request": request,
                            "policy": None
                        },
                        "id": "pep-websocket_client",
                        "topic_name": "topic-name",
                        "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
                    }
                }
            }
        }
    }
    print("\n--------- TRY ACCESS -----------\n")
    print_and_send(ws_req)

    ### GET POLICY (policy_XXX) (not present)
    #    ws_req = {
    #      "RequestPubMessage": {
    #        "value": {
    #          "timestamp": int(datetime.datetime.now().timestamp()*1000),
    #          "command": {
    #            "command_type": "pap-command",
    #            "value": {
    #              "message": {
    #                "purpose": "GET_POLICY",
    #                "message_id": str(uuid.uuid1()),
    #                "policy_id": "policy_XXX"
    #              },
    #              "id": "pap-0",
    #              "topic_name": "topic-name",
    #              "topic_uuid": "topic-uuid-the-ucs-is-subscribed-to"
    #              }
    #            }
    #          }
    #        }
    #      }


if __name__ == "__main__":
    ws = websocket.WebSocketApp("ws://localhost:3000/ws",
                                on_open=on_open,
                                on_message=on_message,
                                on_error=on_error,
                                on_close=on_close)

    ws.run_forever()



### REQUEST TO TURN ON THE LAMP (variable turn_on)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:value" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#integer">1</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>


### REQUEST TO TURN OFF THE LAMP (variable turn_off)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:value" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#integer">0</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>


### REQUEST TO GET THE ON/OFF STATE OF THE LAMP (variable get_on_off)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">get</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>


### REQUEST TO SET THE BRIGHTNESS TO 95 (variable set_brightness_95)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">brightness</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:value" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#integer">95</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>


### REQUEST TO SET THE BRIGHTNESS TO 50  (variable set_brightness_50)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">brightness</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:value" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#integer">50</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>

### REQUEST TO GET THE BRIGHTNESS VALUE (variable get_brightness)
# <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
# <Request ReturnPolicyIdList="false" CombinedDecision="false"
#          xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17">
#     <Attributes Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#         </Attribute>
#     </Attributes>
#     <Attributes Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action">
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">get</AttributeValue>
#         </Attribute>
#         <Attribute AttributeId="urn:oasis:names:tc:xacml:1.0:action:property" IncludeInResult="false">
#             <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">brightness</AttributeValue>
#         </Attribute>
#     </Attributes>
# </Request>


### POLICY (variable policy)
# <Policy
#         xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17"
#         PolicyId="policy-app_name-lamp"
#         RuleCombiningAlgId="urn:oasis:names:tc:xacml:3.0:rule-combining-algorithm:deny-unless-permit"
#         Version="3.0">
#     <Description>Policy for the lamp lamp_id and app app_name</Description>
#     <Target>
#         <AnyOf>
#             <AllOf>
#                 <Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <AttributeDesignator
#                             AttributeId="urn:oasis:names:tc:xacml:1.0:subject:subject-id"
#                             Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject"
#                             DataType="http://www.w3.org/2001/XMLSchema#string"
#                             MustBePresent="true">
#                     </AttributeDesignator>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">app_name</AttributeValue>
#                 </Match>
#                 <Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <AttributeDesignator
#                             AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
#                             Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource"
#                             DataType="http://www.w3.org/2001/XMLSchema#string"
#                             MustBePresent="true">
#                     </AttributeDesignator>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#                 </Match>
#             </AllOf>
#         </AnyOf>
#     </Target>
#     <Rule Effect="Permit" RuleId="rule-set-toggle-on">
#         <Description>Rule that permits to turn on the lamp</Description>
#         <Target></Target>
#         <!-- Pre condition -->
#         <Condition DecisionTime="pre">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:property"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:value"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#integer"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#integer">1</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Permit" RuleId="rule-set-toggle-off">
#         <Description>Rule that permits to turn off the lamp</Description>
#         <Target></Target>
#         <!-- Pre condition -->
#         <Condition DecisionTime="pre">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:property"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:value"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#integer"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#integer">0</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Deny" RuleId="rule-get-toggle-off">
#         <Description>Rule that denies to get the on/off state of the lamp</Description>
#         <Target></Target>
#         <!-- Pre condition -->
#         <Condition DecisionTime="pre">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">get</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:property"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">toggle</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Permit" RuleId="rule-brightness-lower-than-80">
#         <Description>Rule that permits to set the brightness only to a value lower than 80</Description>
#         <Target></Target>
#         <!-- Pre condition -->
#         <Condition DecisionTime="pre">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">set</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:property"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">brightness</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-less-than">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:integer-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:value"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#integer"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#integer">80</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Permit" RuleId="rule-brightness-lower-than-80">
#         <Description>Rule that permits to get the brightness value</Description>
#         <Target></Target>
#         <!-- Pre condition -->
#         <Condition DecisionTime="pre">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">get</AttributeValue>
#                 </Apply>
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:action:property"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">brightness</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Permit" RuleId="ongoing-and-post-always-true">
#         <!-- On going condition -->
#         <Condition DecisionTime="ongoing">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#         <!-- Post condition -->
#         <Condition DecisionTime="post">
#             <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:and">
#                 <Apply
#                         FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
#                     <Apply
#                             FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-one-and-only">
#                         <AttributeDesignator
#                                 AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
#                                 Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource"
#                                 DataType="http://www.w3.org/2001/XMLSchema#string"
#                                 MustBePresent="true">
#                         </AttributeDesignator>
#                     </Apply>
#                     <AttributeValue
#                             DataType="http://www.w3.org/2001/XMLSchema#string">lamp_id</AttributeValue>
#                 </Apply>
#             </Apply>
#         </Condition>
#     </Rule>
#     <Rule Effect="Deny" RuleId="urn:oasis:names:tc:xacml:3.0:defdeny">
#         <Description>DefaultDeny</Description>
#         <Target></Target>
#     </Rule>
# </Policy>